Number.prototype.between=function(a,b){return this<a?a:this>b?b:+this},$.fn.scroll=function(a){a=a||{};var b=this[0],c=this,d=c.width(),e=c.height(),f=c.offset(),g=-e;c.children("img").each(function(){g+=$(this).height()});var h;a.bar&&(a.bar=$(a.bar).detach().appendTo("body"),h=a.bar.height(),a.bar.css({position:"absolute",left:f.left+d}).show());var k,n,p,q,i=a.elastic,j=!1,l=a.arrayFnSpaces,m=e-h,o=0,r=1,s=1,t=function(a){"function"==typeof a.stopPropagation&&a.stopPropagation(),o=a.pageY,n=b.scrollTop,c.on(u,v)},u="mousemove touchmove",v=function(d){q=new Date,p=o-d.pageY,c.scrollTop((n+p).between(0,g)),h&&a.bar.css({top:b.scrollTop/g*m+f.top}),j!==!1&&(s=j(b.scrollTop),s!==r&&(k(s),r=s))};v({pageY:0});var w=function(a){var b=p/3.5|0,d=20;c.off(u,v),!i||+new Date-+q>200||!function c(e,f){e&&setTimeout(function(){var d=a.pageY-b*f;v({pageY:d}),c(e-1,f+1)},d)}(0|Math.sqrt(Math.abs(b)),1)};if("object"==typeof l&&l.map===[].map){var k=l[0];l.length&&"function"==typeof k&&(l[0]=0,l.push(1/0),j=function(a){for(var b=l.length,c=0;c<b;c++)if(a<l[c])return c;return b})}return c.on("mousedown touchstart",t).on("mouseup touchend",w),{moveToSpace:function(a){t({pageY:0});var c=b.scrollTop-l[a-1];v({pageY:c});var d=i;i=!1,w({pageY:c}),i=d}}};
